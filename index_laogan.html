<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>级联演示</title>
	<!-- 引入线上layui -->
	<link href="./layui/css/layui.css" rel="stylesheet">
	<script src="./layui/layui.all.js"></script>
	<!-- 引入插件CSS样式 -->
	<link rel="stylesheet" href="./mods/ajaxCascader/ajaxCascader.css">
	<style>
		.main{
			margin: 20px;
		}
	</style>
</head>
<body>
	<div class="main">
		<cascader id="demo"></cascader>
        <button class="layui-btn">提交</button>
	</div>
	<script>
		layui.config({
            base: './mods/ajaxCascader/'
            ,version: '1.0'
        });
        layui.use(['jquery','ajaxCascader'],function(){
            var $ = layui.jquery;
        	var cascader = layui.ajaxCascader;
            // data
            // value
            // 二选一，都写的话以data为主
            var options={           	
            	elem:'#demo'
                // ,width:100                                                                       // 【可选】 input框宽度  【默认：220】  
                // ,height:50                                                                       // 【可选】 input框高度  【默认：40】
                ,prop:{
                    value:'id',                                                                  // 【可选】 定义接口需要取得的值的名称字段  【默认：value】
                    label:'regionName',                                                                  // 【可选】 定义接口显示的名称字段  【默认：label】
                    children:'children'
                }
                ,showlast:false                                                                      // 【可选】 是否只显示最后一级 【默认：false】
                ,value:0                                                                            // 【二选一】ajax请求初始值,即获取根结点的初始请求参数

                ,getChildren:function(value,callback){    // 【可选】 用户自定义获取data子集的方法,
                    var data = [];                   //        value为当前dom的value值
                    $.ajax({                         
                        url:'http://10.10.7.214:8101/sysRegion/getByParentId/'+value,
                        type:'get',
                        async:false,
                        success:function(res){
                            data = res.data;
                            for(var i in data){
                                data[i].value = data[i].id;
                                data[i].label = data[i].name;
                                delete data[i].id;
                                delete data[i].name;
                                data[i].hasChild = true;
                            }
                            callback(data);
                        }
                    });
                }
                // ,checkData:['520000000000','520300000000','520302000000']  //回显参数               
            }
        	cascader.load(options);
            // 提交按钮点击
            $('.layui-btn').click(function(){
                console.log(cascader.getChooseData());
            })
            // 监听点击事件
            // cascader.on('click','#demo',function(){
            //     console.log(cascader.getChooseData())
            // })
        });
	</script>
</body>
</html>